## **Documentaci贸n de Consultas**

### **Estructura General**
El sistema est谩 dise帽ado siguiendo una arquitectura organizada en **cuatro capas principales**, cada una desempe帽ando un rol espec铆fico en el flujo de las consultas:

1. **Controller:** Define los endpoints HTTP y canaliza las solicitudes hacia la capa de servicio.
2. **Service:** Implementa la l贸gica de negocio, validaciones y transformaciones necesarias antes de interactuar con los datos.
3. **Repository:** Gestiona las interacciones directas con la base de datos MongoDB.
4. **Entity:** Representa las estructuras de datos de MongoDB en clases de Java.

---

### **Consultas CRUD y Descripci贸n**

#### **1. Crear una Sucursal**
- **Tipo de Operaci贸n:** `CREATE` (C en CRUD).
- **Descripci贸n:** Permite agregar una nueva sucursal al sistema. La solicitud llega al controlador, donde se valida que no exista una sucursal con el mismo c贸digo. La sucursal se guarda en la colecci贸n correspondiente en MongoDB a trav茅s de un repositorio.
- **Relaci贸n con el Diagrama:** Una sucursal puede estar asociada a varias bodegas mediante el campo `codigoSucursal`.

---

#### **2. Crear y Eliminar una Bodega**
- **Crear Bodega:**
  - **Tipo de Operaci贸n:** `CREATE`.
  - **Descripci贸n:** Se agrega una bodega al sistema y se vincula con una sucursal existente. Los datos se validan en la capa de servicio y se insertan en MongoDB.
- **Eliminar Bodega:**
  - **Tipo de Operaci贸n:** `DELETE`.
  - **Descripci贸n:** Permite eliminar una bodega existente identificada por su c贸digo 煤nico. La bodega se elimina de la colecci贸n correspondiente.
- **Relaci贸n con el Diagrama:** Las bodegas est谩n referenciadas por las sucursales, y cada bodega puede contener productos en su inventario.

---

#### **3. Crear o Actualizar un Proveedor**
- **Tipo de Operaci贸n:** `CREATE` y `UPDATE`.
- **Descripci贸n:** Si el proveedor no existe, se crea uno nuevo. Si ya existe (identificado por el `NIT`), se actualizan sus datos. La solicitud fluye desde el controlador al servicio, donde se valida y gestiona la l贸gica necesaria antes de interactuar con la base de datos.
- **Relaci贸n con el Diagrama:** Los proveedores est谩n referenciados por las 贸rdenes de compra mediante su `NIT`.

---

#### **4. Crear una Categor铆a de Producto**
- **Tipo de Operaci贸n:** `CREATE`.
- **Descripci贸n:** Permite agregar una nueva categor铆a de productos. El servicio valida que la categor铆a no exista previamente, y los datos se almacenan en MongoDB a trav茅s del repositorio.
- **Relaci贸n con el Diagrama:** Cada producto est谩 relacionado con una categor铆a mediante su `codigoCategoria`.

---

#### **5. Crear un Producto**
- **Tipo de Operaci贸n:** `CREATE`.
- **Descripci贸n:** Permite registrar un nuevo producto, asoci谩ndolo a una categor铆a existente. La solicitud pasa desde el controlador al servicio, donde se valida la existencia de la categor铆a, y luego al repositorio para almacenarlo en la base de datos.
- **Relaci贸n con el Diagrama:** Los productos pertenecen a categor铆as y pueden formar parte de 贸rdenes de compra y del inventario.

---

#### **6. Crear una Orden de Compra**
- **Tipo de Operaci贸n:** `CREATE`.
- **Descripci贸n:** Permite registrar una nueva orden de compra para una sucursal espec铆fica. La solicitud utiliza un **DTO** para simplificar la transferencia de datos entre el frontend y el backend. Se validan los datos relacionados (sucursal, proveedor, productos) antes de guardar la orden en la base de datos.
- **Relaci贸n con el Diagrama:** La orden de compra referencia sucursales, proveedores y productos, conectando varias entidades en el sistema.

---

#### **7. Leer una Orden de Compra**
- **Tipo de Operaci贸n:** `READ` (R en CRUD).
- **Descripci贸n:** Permite consultar los detalles de una orden de compra espec铆fica mediante su c贸digo 煤nico. La solicitud llega al controlador, que utiliza el repositorio para buscar la orden en la base de datos.
- **Relaci贸n con el Diagrama:** La orden incluye productos embebidos en su detalle y referencias a sucursales y proveedores.

---

#### **8. Mostrar Productos con Ciertas Caracter铆sticas**
- **Tipo de Operaci贸n:** `READ`.
- **Descripci贸n:** Filtra productos seg煤n criterios espec铆ficos, como nombre, rango de precio u otros atributos. El servicio construye los filtros din谩micamente y realiza la consulta en la base de datos.
- **Relaci贸n con el Diagrama:** Permite realizar b煤squedas avanzadas sobre la colecci贸n de productos, apoy谩ndose en los atributos definidos en el modelo de datos.

---

#### **9. Inventario de Productos en una Sucursal**
- **Tipo de Operaci贸n:** `READ`.
- **Descripci贸n:** Consulta los productos disponibles en el inventario de una sucursal espec铆fica. La solicitud pasa por el controlador y el servicio, donde se valida el c贸digo de la sucursal, y finalmente se realiza la consulta en MongoDB.
- **Relaci贸n con el Diagrama:** El inventario conecta productos y bodegas, relacion谩ndolos con sucursales a trav茅s de los c贸digos correspondientes.

---

### **C贸mo se Conectan las Capas**

1. **Controladores (Controllers):**
   - Definen los endpoints y los m茅todos HTTP (`POST`, `GET`, `DELETE`, etc.).
   - Reciben los datos de entrada (par谩metros o cuerpo de la solicitud).
   - Delegan la l贸gica de negocio a los servicios.

2. **Servicios (Services):**
   - Implementan la l贸gica de negocio, como validaciones, transformaciones o c谩lculos.
   - Interact煤an con los repositorios para realizar operaciones en la base de datos.

3. **Repositorios (Repositories):**
   - Gestionan las operaciones CRUD con la base de datos MongoDB.
   - Utilizan `MongoRepository` para operaciones b谩sicas y `MongoTemplate` para consultas personalizadas.

4. **Entidades (Entities):**
   - Representan los documentos almacenados en MongoDB.
   - Los atributos de las entidades corresponden a los campos de las colecciones en la base de datos.

5. **DTO (Orden de Compra):**
   - Facilita la transferencia de datos al agrupar informaci贸n compleja (productos, proveedor, sucursal) en una sola estructura.

---

### **Relaci贸n con los Diagramas**

- **Diagramas Estructurales:**
  - Representan c贸mo las entidades est谩n relacionadas entre s铆 en MongoDB.
  - Cada clase en la capa de entidades (como `Sucursal`, `Bodega`, `Producto`, etc.) corresponde a una colecci贸n o subdocumento en la base de datos.

- **Diagramas de Relaciones:**
  - Conexiones como `codigoSucursal` en bodegas o `codigoCategoria` en productos se utilizan para referenciar documentos relacionados.

---

### **Conclusi贸n**
Esta documentaci贸n muestra c贸mo cada consulta interact煤a con las capas del sistema y se conecta con la base de datos MongoDB. La estructura modular facilita el mantenimiento y escalabilidad del proyecto, mientras que el uso de DTOs, validaciones en servicios y consultas espec铆ficas en repositorios asegura la correcta operaci贸n del sistema. 
